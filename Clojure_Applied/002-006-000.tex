\chapter{コンポーネントの作成}

ドメインの表現、集計データの作成、関数によるデータ変換、状態の作成、並行処理の使用など、基礎は固まりました。次は、より大きな単位で、問題に対応するコードの構築を始める番です。この大きな単位をコンポーネントと呼ぶことにします。コードをコンポーネントに分割することで、問題に対応する部分をより高いレベルで考えることができるようになります。また、コンポーネントの境界は、複数の開発者やチームにコードベースを分割するのに適した方法です。また、再利用の機会にもなり得ます。

コンポーネントは、より細かい要素（関数、レコード、プロトコル）の集合体であり、全体として大きな目的を持っている。呼び出し元が使用する外部APIを備えている。また、コンポーネントの状態を含む内部実装を持ち、内部で並行処理を行い、データを並列処理したり、イベントに対応するための別スレッドを作成したりすることもできます。

アプリケーションの機能をClojure名前空間に整理する方法を見て、コンポーネントの考察を開始します。これは、コンポーネントの内部と外部の両方を含むすべてのコードに適用されます。次に、呼び出し元が使用する外部APIについて見ていきます。これは、関数呼び出しインターフェースと、より長寿命の \texttt{core.async} チャンネルの使用の両方を考慮する必要があります。最後に、コンポーネントの内部をどのように実装するか、状態や並行性のために既に見たツールを使ってコンポーネントの状態やそのライフサイクルを管理するかについて見ていきます。

第7章「アプリケーションを構成する」では、これらのコンポーネントを次のステップとして、アプリケーションを完全に組み立てていきます。


\input{002-006-001.tex} % Organizing with Namespaces
\input{002-006-002.tex} % Designing Component APIs
\input{002-006-003.tex} % Connecting Components with Channels
\input{002-006-004.tex} % Implementing Components
\input{002-006-005.tex} % Wrapping Up